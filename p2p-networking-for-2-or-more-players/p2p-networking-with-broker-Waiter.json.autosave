{"firstLayout":"","gdVersion":{"build":99,"major":4,"minor":0,"revision":0},"properties":{"adaptGameResolutionAtRuntime":true,"folderProject":false,"orientation":"landscape","packageName":"com.example.multiplayergamefor2ormore","pixelsRounding":false,"projectUuid":"4e5a640f-64c8-45c4-97a3-8bf51ce318b1","scaleMode":"linear","sizeOnStartupMode":"","useDeprecatedZeroAsDefaultZOrder":true,"useExternalSourceFiles":false,"version":"1.0.0","name":"Expanded P2P Networking Example","author":"Slash","windowWidth":800,"windowHeight":600,"latestCompilationDirectory":"","maxFPS":60,"minFPS":20,"verticalSync":false,"platformSpecificAssets":{},"loadingScreen":{"backgroundColor":0,"backgroundFadeInDuration":0.2,"backgroundImageResourceName":"","gdevelopLogoStyle":"light","logoAndProgressFadeInDuration":0.2,"logoAndProgressLogoFadeInDelay":0.2,"minDuration":1.5,"progressBarColor":16777215,"progressBarHeight":20.0,"progressBarMaxWidth":200.0,"progressBarMinWidth":40.0,"progressBarWidthPercent":30.0,"showGDevelopSplash":false,"showProgressBar":true},"authorIds":[],"extensionProperties":[],"platforms":[{"name":"GDevelop JS platform"}],"currentPlatform":"GDevelop JS platform"},"resources":{"resources":[{"alwaysLoaded":false,"file":"Assets/button_icon.png","kind":"image","metadata":"","name":"Assets\\button_icon.png","smoothed":true,"userAdded":false},{"alwaysLoaded":false,"file":"Assets/chat_icon.png","kind":"image","metadata":"","name":"Assets\\chat_icon.png","smoothed":true,"userAdded":false},{"alwaysLoaded":false,"file":"Assets/textEntry.png","kind":"image","metadata":"","name":"Assets\\textEntry.png","smoothed":true,"userAdded":false},{"alwaysLoaded":false,"file":"Assets/void.png","kind":"image","metadata":"","name":"Assets\\void.png","smoothed":true,"userAdded":true},{"alwaysLoaded":false,"file":"Assets/box.png","kind":"image","metadata":"","name":"Assets\\box.png","smoothed":true,"userAdded":true},{"alwaysLoaded":false,"file":"Assets/Checkmark.png","kind":"image","metadata":"","name":"Assets\\Checkmark.png","smoothed":true,"userAdded":true},{"alwaysLoaded":false,"file":"Assets/UncheckedCheckmark.png","kind":"image","metadata":"","name":"Assets\\UncheckedCheckmark.png","smoothed":true,"userAdded":true},{"alwaysLoaded":false,"file":"Assets/textEntry2.png","kind":"image","metadata":"","name":"Assets\\textEntry2.png","smoothed":true,"userAdded":true},{"alwaysLoaded":false,"file":"Assets/removebotton.png","kind":"image","metadata":"","name":"Assets\\removebotton.png","smoothed":true,"userAdded":true},{"alwaysLoaded":false,"file":"Assets/connectbotton.png","kind":"image","metadata":"","name":"Assets\\connectbotton.png","smoothed":true,"userAdded":true},{"alwaysLoaded":false,"file":"Assets/pastebotton.png","kind":"image","metadata":"","name":"Assets\\pastebotton.png","smoothed":true,"userAdded":true},{"alwaysLoaded":false,"file":"Assets/StartAddButton.png","kind":"image","metadata":"","name":"Assets\\StartAddButton.png","smoothed":true,"userAdded":true}],"resourceFolders":[]},"objects":[],"objectsGroups":[],"variables":[{"name":"playerlist","type":"string","value":"n"},{"name":"username","type":"string","value":""}],"layouts":[{"b":209,"disableInputWhenNotFocused":true,"mangledName":"Start","name":"Start","oglFOV":90.0,"oglZFar":500.0,"oglZNear":1.0,"r":209,"standardSortMethod":true,"stopSoundsOnStartup":true,"title":"","v":209,"uiSettings":{"grid":false,"gridType":"rectangular","gridWidth":32.0,"gridHeight":32.0,"gridOffsetX":0.0,"gridOffsetY":0.0,"gridColor":10401023.0,"gridAlpha":0.8,"snap":true,"zoomFactor":0.5999999999999997,"windowMask":false},"objectsGroups":[],"variables":[],"instances":[{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"welcome","persistentUuid":"f0ed808a-9b0f-492e-894e-dbe807162d2c","width":0.0,"x":116.0,"y":10.0,"zOrder":1,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"Broker","persistentUuid":"2ae59a29-cac4-4343-9509-a0f758a5e297","width":0.0,"x":125.0,"y":332.0,"zOrder":2,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"height":100.0,"layer":"","locked":false,"name":"selectsprite","persistentUuid":"1d313f84-d0ab-4c73-853c-bb17e8db46d3","width":140.0,"x":560.0,"y":300.0,"zOrder":0,"numberProperties":[],"stringProperties":[],"initialVariables":[{"name":"id","type":"string","value":"2"}]},{"angle":0.0,"customSize":true,"height":100.0,"layer":"","locked":false,"name":"selectsprite","persistentUuid":"479c19f6-6ae8-49e3-9901-c8cb87352cae","width":140.0,"x":100.0,"y":300.0,"zOrder":0,"numberProperties":[],"stringProperties":[],"initialVariables":[{"name":"id","type":"string","value":"1"}]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"Wait","persistentUuid":"c15b6aac-3a9c-4d69-8fde-b52b8e6b465a","width":0.0,"x":600.0,"y":332.0,"zOrder":3,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"Info","persistentUuid":"cc1c4cc8-228e-4549-8976-fd360b4ad80a","width":0.0,"x":56.0,"y":412.0,"zOrder":4,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"inputSprite","persistentUuid":"3b66ff3a-c06e-495c-856c-473eefb63f67","width":0.0,"x":145.0,"y":84.0,"zOrder":5,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"TextEntry","persistentUuid":"7f73de0f-8db9-4b03-8e08-aaa4bb763ebd","width":0.0,"x":571.0,"y":99.0,"zOrder":6,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"Username","persistentUuid":"cea9f7cf-7454-40bd-99ae-d1fae24e29b5","width":0.0,"x":160.0,"y":100.0,"zOrder":7,"numberProperties":[],"stringProperties":[],"initialVariables":[]}],"objects":[{"bold":true,"italic":false,"name":"welcome","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"      Type in your Username:\n\n\n\n\nChoose your connection method:","font":"","characterSize":35.0,"color":{"b":254,"g":19,"r":144}},{"bold":true,"italic":false,"name":"Wait","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"Wait","font":"","characterSize":30.0,"color":{"b":0,"g":0,"r":0}},{"bold":true,"italic":false,"name":"Broker","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"Broker","font":"","characterSize":30.0,"color":{"b":0,"g":0,"r":0}},{"name":"selectsprite","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[],"effects":[],"behaviors":[],"animations":[{"name":"","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"Assets\\box.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]},{"bold":false,"italic":false,"name":"Info","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"The Broker connects                                     Waiters give their P2P\n    to each player                                            adress to the Broker\n","font":"","characterSize":24.0,"color":{"b":254,"g":19,"r":144}},{"name":"inputSprite","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[],"effects":[],"behaviors":[],"animations":[{"name":"","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"Assets\\textEntry.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]},{"name":"TextEntry","tags":"","type":"TextEntryObject::TextEntry","variables":[],"effects":[],"behaviors":[]},{"bold":true,"italic":false,"name":"Username","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"Username","font":"","characterSize":24.0,"color":{"b":0,"g":0,"r":0}}],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"TextEntryObject::Activated"},"parameters":["TextEntry"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["Username","=","TextEntry.String()"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"MouseButtonPressed"},"parameters":["","Left"],"subInstructions":[]},{"type":{"inverted":false,"value":"BuiltinCommonInstructions::Once"},"parameters":[],"subInstructions":[]}],"actions":[],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"SourisSurObjet"},"parameters":["selectsprite","","",""],"subInstructions":[]}],"actions":[],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"ModVarGlobalTxt"},"parameters":["username","=","Username.String()"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarObjet"},"parameters":["selectsprite","id","=","1"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"Scene"},"parameters":["","\"Broker\"",""],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarObjet"},"parameters":["selectsprite","id","=","2"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"Scene"},"parameters":["","\"Wait\"",""],"subInstructions":[]}],"events":[]}]}]}],"layers":[{"ambientLightColorB":18408904,"ambientLightColorG":6350856,"ambientLightColorR":77432200,"followBaseLayerCamera":false,"isLightingLayer":false,"name":"","visibility":true,"cameras":[{"defaultSize":true,"defaultViewport":true,"height":0.0,"viewportBottom":1.0,"viewportLeft":0.0,"viewportRight":1.0,"viewportTop":0.0,"width":0.0}],"effects":[]}],"behaviorsSharedData":[]},{"b":209,"disableInputWhenNotFocused":true,"mangledName":"Wait","name":"Wait","oglFOV":90.0,"oglZFar":500.0,"oglZNear":1.0,"r":209,"standardSortMethod":true,"stopSoundsOnStartup":true,"title":"","v":209,"uiSettings":{"grid":false,"gridType":"rectangular","gridWidth":32.0,"gridHeight":32.0,"gridOffsetX":0.0,"gridOffsetY":0.0,"gridColor":10401023.0,"gridAlpha":0.8,"snap":true,"zoomFactor":0.5254000000000001,"windowMask":false},"objectsGroups":[],"variables":[{"name":"playerdata","type":"string","value":"n"}],"instances":[{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"WelcomeText","persistentUuid":"db9fbdf7-7181-4bdf-b573-f190e26f7c00","width":0.0,"x":18.0,"y":112.0,"zOrder":0,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"idText","persistentUuid":"2b9960c9-0c9c-428d-9ef8-2b3b2398b943","width":0.0,"x":111.0,"y":160.0,"zOrder":1,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"CopyButton","persistentUuid":"a976db91-91a3-4bbe-809e-37e97a22c664","width":0.0,"x":346.0,"y":210.0,"zOrder":7,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"CopyText","persistentUuid":"bbdca1d7-0d85-477b-82ed-229a67cba787","width":0.0,"x":363.0,"y":226.0,"zOrder":8,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"ErrorText","persistentUuid":"ea4b93a6-a8e4-4371-8f2e-f6e6cc4ae93b","width":0.0,"x":107.0,"y":313.0,"zOrder":11,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"Status","persistentUuid":"e16ffbb4-a5a8-41a1-99a3-651771c37ab9","width":0.0,"x":145.0,"y":510.0,"zOrder":12,"numberProperties":[],"stringProperties":[],"initialVariables":[]}],"objects":[{"bold":false,"italic":false,"name":"WelcomeText","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"Give your Broker the following Adress to connect:","font":"","characterSize":35.0,"color":{"b":254,"g":19,"r":144}},{"bold":true,"italic":false,"name":"idText","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"<The ID>","font":"","characterSize":30.0,"color":{"b":254,"g":19,"r":144}},{"name":"CopyButton","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[],"effects":[],"behaviors":[],"animations":[{"name":"","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"Assets\\pastebotton.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]},{"bold":false,"italic":false,"name":"CopyText","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"Copy","font":"","characterSize":20.0,"color":{"b":0,"g":0,"r":0}},{"bold":false,"italic":false,"name":"ErrorText","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"Error","font":"","characterSize":20.0,"color":{"b":0,"g":0,"r":255}},{"bold":false,"italic":false,"name":"Status","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"Waiting for Broker to connect ...","font":"","characterSize":35.0,"color":{"b":254,"g":19,"r":144}}],"events":[{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"disabled":false,"folded":false,"name":"Initiate","source":"","type":"BuiltinCommonInstructions::Group","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"DepartScene"},"parameters":[""],"subInstructions":[]}],"actions":[],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Use a custom server","comment2":""},{"disabled":true,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"P2P::UseOwnBroker"},"parameters":["\"localhost\"","9000","\"/\"","\"\"","no"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Use default server","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"P2P::UseDefaultBroker"},"parameters":[],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["ErrorText","=","\"\""],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"We using a boolean to check for a first connection (should be the broker)","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"SetSceneVariableAsBoolean"},"parameters":["FirstConnect","True"],"subInstructions":[]}],"events":[]}]}],"parameters":[]},{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"disabled":false,"folded":false,"name":"P2P responses","source":"","type":"BuiltinCommonInstructions::Group","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"P2P::IsReady"},"parameters":[],"subInstructions":[]},{"type":{"inverted":false,"value":"BuiltinCommonInstructions::Once"},"parameters":[],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["idText","=","P2P::GetID()"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":197,"g":197,"r":197,"textB":0,"textG":0,"textR":0},"comment":"Note: P2P events like triggered by peer, peer connected are trigger once by nature","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"When a peer is connected, confirm connection and keep count of it  [Triggered both from Waiters and Broker]","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"P2P::OnConnection"},"parameters":[],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["PeerCount","+","1"],"subInstructions":[]}],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Since the Broker will add the Username to the playerlist, we dont need to send it again","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"SceneVariableAsBoolean"},"parameters":["FirstConnect","False"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"P2P::SendToOne"},"parameters":["P2P::GetLastConnectedPeer()","\"ok\"","\"\""],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"We check the first connection to send the Broker the Username","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"SceneVariableAsBoolean"},"parameters":["FirstConnect","True"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"P2P::SendToOne"},"parameters":["P2P::GetLastConnectedPeer()","\"ok\"","GlobalVariableString(username)"],"subInstructions":[]},{"type":{"inverted":false,"value":"SetSceneVariableAsBoolean"},"parameters":["FirstConnect","False"],"subInstructions":[]}],"events":[]}]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"P2P::OnEvent"},"parameters":["\"ok\"","yes"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["PeerCount","+","1"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"brokers confirmation that the player is in the playerlist [send from Broker]","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"P2P::OnEvent"},"parameters":["\"in\"","yes"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["Status","=","\"The Broker added you to the Game!\"+NewLine()+\"Wait for the Broker to start the Game...\""],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"In case of a disconnection the broker sends the restart and we undo the list and wait for a new one [send from Broker]","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"P2P::OnEvent"},"parameters":["\"restart\"","yes"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"GlobalVariableClearChildren"},"parameters":["playerlist"],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarSceneTxt"},"parameters":["playerdata","=","\"n\""],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarGlobalTxt"},"parameters":["playerlist","=","\"n\""],"subInstructions":[]},{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["Status","=","\"A Player was Disconnected\"+NewLine()+\"Wait for the Broker to start the Game...\""],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["Step","=","0"],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["PlayerCount","=","1"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Switch to the game once all connections are confirmed [send from Broker]","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"P2P::OnEvent"},"parameters":["\"go\"","yes"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"Scene"},"parameters":["","\"Menu\"","yes"],"subInstructions":[]}],"events":[]},{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"disabled":false,"folded":false,"name":"Connect to the other players","source":"","type":"BuiltinCommonInstructions::Group","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":194,"g":227,"r":80,"textB":0,"textG":0,"textR":0},"comment":"This Connection Procedure is divided into steps since the dataflow is asynchronious. It also helps to debug and avoids the same P2P events triggered at the same time","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"recieve playerlist from the broker and store it into a global variable (for use in later scenes) [send from Broker]","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"P2P::OnEvent"},"parameters":["\"ready\"","yes"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"ModVarSceneTxt"},"parameters":["playerdata","=","P2P::GetEventData(\"ready\")"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Wait for the JSON to be stored and the variable playerdata is no longer n, then kick off the connection progress","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarSceneTxt"},"parameters":["playerdata","!=","\"n\""],"subInstructions":[]},{"type":{"inverted":false,"value":"BuiltinCommonInstructions::Once"},"parameters":[],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["Step","=","1"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Parse the JSON recieved from the broker and store it in the Global Variable playerlist","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarScene"},"parameters":["Step","=","1"],"subInstructions":[]}],"actions":[],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"BuiltinCommonInstructions::Once"},"parameters":[],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"JSONToGlobalVariableStructure"},"parameters":["VariableString(playerdata)","playerlist"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Wait for the JSON to be parsed and the variable playerlist is no longer n, then check your position in the list","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarGlobalTxt"},"parameters":["playerlist","!=","\"n\""],"subInstructions":[]}],"actions":[],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"we search for our position in the playerlist and set the PlayerCount variable to it,  since you only need to connect to the players above you in the playerlist","comment2":""},{"disabled":false,"folded":false,"infiniteLoopWarning":true,"type":"BuiltinCommonInstructions::While","whileConditions":[{"type":{"inverted":true,"value":"VarGlobalTxt"},"parameters":["playerlist[VariableString(PlayerCount)].username","=","GlobalVariableString(username)"],"subInstructions":[]}],"conditions":[],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["PlayerCount","+","1"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Continue connection progress, if not the last player","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"Egal"},"parameters":["Variable(PlayerCount)+1","<","GlobalVariableChildCount(playerlist)"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["Step","=","2"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"The last player in the list does not need to connect to anyone","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"Egal"},"parameters":["Variable(PlayerCount)+1","=","GlobalVariableChildCount(playerlist)"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["Step","=","5"],"subInstructions":[]}],"events":[]}]}]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"connect to players with a higher position in the playerlist","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarScene"},"parameters":["Step","=","2"],"subInstructions":[]}],"actions":[],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["PlayerCount","+","1"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"P2P::Connect"},"parameters":["GlobalVariableString(playerlist[VariableString(PlayerCount)].id)"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["Status","=","\"Connecting to other Players...\"+NewLine()+\"connect to Player\"+VariableString(PlayerCount)"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["Step","=","3"],"subInstructions":[]}],"events":[]}]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Wait for the connect response","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarScene"},"parameters":["Step","=","3"],"subInstructions":[]}],"actions":[],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Wait for the confirm","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"P2P::OnEvent"},"parameters":["\"ok\"","yes"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["Step","=","4"],"subInstructions":[]}],"events":[]},{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"disabled":true,"folded":false,"name":"Waiters actions for connecting issues (should not be needed, since the broker will send the \"restart\" if a peer disconnects)","source":"","type":"BuiltinCommonInstructions::Group","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"if the connection failed we skip the user for now and just add a fake +1 to PeerCount to be able to give the \"ready\" in step 5","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"P2P::OnError"},"parameters":[],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["PeerCount","+","1"],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["Step","=","4"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"SubStr(VariableString(error),33,68) returns the id of the failed connection (if variable error was set to P2P::GetLastError()), if the error massage was failed to connect to .........\ndepending on your game, you might want to trigger an event to the broker and tell him, that the connection failed  and either try to connect again, or remove him out of the playerlist","comment2":""},{"disabled":true,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"P2P::OnError"},"parameters":[],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"ModVarSceneTxt"},"parameters":["error","=","P2P::GetLastError()"],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarSceneTxt"},"parameters":["errorid","=","SubStr(VariableString(error),33,68)"],"subInstructions":[]}],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarGlobalTxt"},"parameters":["playerlist[VariableString(PlayerCount)].id","=","VariableString(errorid)"],"subInstructions":[]}],"actions":[],"events":[]}]}],"parameters":[]}]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Check if it was the last player","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarScene"},"parameters":["Step","=","4"],"subInstructions":[]}],"actions":[],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"if not, repeat connection progress","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"Egal"},"parameters":["Variable(PlayerCount)+1","<","GlobalVariableChildCount(playerlist)"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["Step","=","2"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"if yes, go out of the connection loop by setting step to 5","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarScene"},"parameters":["Step","=","4"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["Step","=","5"],"subInstructions":[]}],"events":[]}]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"In this step we wait till all players are connected","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarScene"},"parameters":["Step","=","5"],"subInstructions":[]}],"actions":[],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"When PeerCount (+ 1 for the broker) is equal to the number of children of playerlist means  all players are connected","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"Egal"},"parameters":["Variable(PeerCount)+1","=","GlobalVariableChildCount(playerlist)"],"subInstructions":[]},{"type":{"inverted":false,"value":"BuiltinCommonInstructions::Once"},"parameters":[],"subInstructions":[]}],"actions":[],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Give the Broker the Ready!","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"P2P::SendToOne"},"parameters":["GlobalVariableString(playerlist.0.id)","\"ready\"","\"\""],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Uptate the status text to let the player know","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["Status","=","\"Game is READY!\""],"subInstructions":[]}],"events":[]}]}]}],"parameters":[]}],"parameters":[]},{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"disabled":false,"folded":false,"name":"Copy P2P Adress","source":"","type":"BuiltinCommonInstructions::Group","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"SourisBouton"},"parameters":["","Left"],"subInstructions":[]},{"type":{"inverted":false,"value":"BuiltinCommonInstructions::Once"},"parameters":[],"subInstructions":[]}],"actions":[],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"SourisSurObjet"},"parameters":["CopyButton","","",""],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"Clipboard::WriteText"},"parameters":["","P2P::GetID()",""],"subInstructions":[]}],"events":[]}]}],"parameters":[]},{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"disabled":false,"folded":false,"name":"Error Handling","source":"","type":"BuiltinCommonInstructions::Group","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"P2P::OnError"},"parameters":[],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["ErrorText","=","P2P::GetLastError()"],"subInstructions":[]}],"events":[]}],"parameters":[]}],"layers":[{"ambientLightColorB":200,"ambientLightColorG":200,"ambientLightColorR":200,"followBaseLayerCamera":false,"isLightingLayer":false,"name":"","visibility":true,"cameras":[{"defaultSize":true,"defaultViewport":true,"height":0.0,"viewportBottom":1.0,"viewportLeft":0.0,"viewportRight":1.0,"viewportTop":0.0,"width":0.0}],"effects":[]}],"behaviorsSharedData":[]},{"b":209,"disableInputWhenNotFocused":true,"mangledName":"Broker","name":"Broker","oglFOV":90.0,"oglZFar":500.0,"oglZNear":1.0,"r":209,"standardSortMethod":true,"stopSoundsOnStartup":true,"title":"","v":209,"uiSettings":{"grid":false,"gridType":"rectangular","gridWidth":32.0,"gridHeight":32.0,"gridOffsetX":0.0,"gridOffsetY":0.0,"gridColor":10401023.0,"gridAlpha":0.8,"snap":true,"zoomFactor":0.8054000000000003,"windowMask":false},"objectsGroups":[{"name":"Playerfields","objects":[{"name":"PasteButton"},{"name":"PasteText"},{"name":"idEntry"},{"name":"idEntryText"},{"name":"idEntrySprite"},{"name":"RemoveButton"},{"name":"remove"},{"name":"CopyButton"},{"name":"CopyText"},{"name":"ConnectText"},{"name":"ConnectButton"}]}],"variables":[],"instances":[{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"WelcomeText","persistentUuid":"db9fbdf7-7181-4bdf-b573-f190e26f7c00","width":0.0,"x":51.0,"y":94.0,"zOrder":0,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"ErrorText","persistentUuid":"ea4b93a6-a8e4-4371-8f2e-f6e6cc4ae93b","width":0.0,"x":86.0,"y":68.0,"zOrder":11,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"add","persistentUuid":"81c2703e-d484-4a8b-b1f1-7fbf72119273","width":0.0,"x":148.0,"y":214.0,"zOrder":1,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"addButton","persistentUuid":"ea10c200-4714-4afa-811d-0d5044375e20","width":0.0,"x":114.0,"y":200.0,"zOrder":0,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"Start","persistentUuid":"4d065dca-fddb-49e8-9885-7f4c19419583","width":0.0,"x":438.0,"y":214.0,"zOrder":16,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"height":57.0,"layer":"","locked":false,"name":"StartButton","persistentUuid":"84323653-64eb-48b9-a836-930546aa0699","width":190.0,"x":393.0,"y":200.0,"zOrder":0,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"usernamebroker","persistentUuid":"4adea7e3-6c47-42f1-8c9a-3572b37ffcdc","width":0.0,"x":292.0,"y":12.0,"zOrder":17,"numberProperties":[],"stringProperties":[],"initialVariables":[]}],"objects":[{"bold":false,"italic":false,"name":"usernamebroker","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"Username","font":"","characterSize":35.0,"color":{"b":17,"g":17,"r":17}},{"bold":false,"italic":false,"name":"WelcomeText","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"Enter the Adress from another clients here:","font":"","characterSize":35.0,"color":{"b":254,"g":19,"r":144}},{"bold":true,"italic":false,"name":"idText","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"<The ID>","font":"","characterSize":30.0,"color":{"b":254,"g":19,"r":144}},{"name":"idEntry","tags":"","type":"TextEntryObject::TextEntry","variables":[],"effects":[],"behaviors":[]},{"bold":false,"italic":false,"name":"idEntryText","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"<ID Entry Text>","font":"","characterSize":20.0,"color":{"b":0,"g":0,"r":0}},{"name":"idEntrySprite","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[],"effects":[],"behaviors":[],"animations":[{"name":"","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"Assets\\textEntry.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]},{"name":"","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"Assets\\textEntry2.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]},{"name":"StartButton","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[],"effects":[],"behaviors":[],"animations":[{"name":"","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"Assets\\StartAddButton.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]},{"name":"addButton","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[],"effects":[],"behaviors":[],"animations":[{"name":"","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"Assets\\StartAddButton.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]},{"name":"RemoveButton","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[],"effects":[],"behaviors":[],"animations":[{"name":"","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"Assets\\removebotton.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]},{"name":"ConnectButton","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[],"effects":[],"behaviors":[],"animations":[{"name":"","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"Assets\\connectbotton.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]},{"name":"CopyButton","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[],"effects":[],"behaviors":[],"animations":[{"name":"","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"Assets\\textEntry.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]},{"name":"checkbox","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[{"name":"id","type":"string","value":"0"}],"effects":[],"behaviors":[],"animations":[{"name":"checked","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"Assets\\Checkmark.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]},{"name":"unchecked","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"Assets\\UncheckedCheckmark.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]},{"name":"PasteButton","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[],"effects":[],"behaviors":[],"animations":[{"name":"","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"Assets\\pastebotton.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]},{"bold":false,"italic":false,"name":"ConnectText","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"Connect!","font":"","characterSize":20.0,"color":{"b":0,"g":0,"r":0}},{"bold":false,"italic":false,"name":"CopyText","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"Copy","font":"","characterSize":20.0,"color":{"b":0,"g":0,"r":0}},{"bold":false,"italic":false,"name":"PasteText","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"Paste","font":"","characterSize":20.0,"color":{"b":0,"g":0,"r":0}},{"bold":false,"italic":false,"name":"ErrorText","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"Error","font":"","characterSize":20.0,"color":{"b":0,"g":0,"r":255}},{"bold":false,"italic":false,"name":"Start","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"Start Game","font":"","characterSize":20.0,"color":{"b":0,"g":0,"r":0}},{"bold":false,"italic":false,"name":"add","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"Add a Player","font":"","characterSize":20.0,"color":{"b":0,"g":0,"r":0}},{"bold":false,"italic":false,"name":"remove","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"Remove","font":"","characterSize":20.0,"color":{"b":0,"g":0,"r":0}}],"events":[{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"disabled":false,"folded":false,"name":"Initiate","source":"","type":"BuiltinCommonInstructions::Group","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["usernamebroker","=","GlobalVariableString(username)"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"DepartScene"},"parameters":[""],"subInstructions":[]}],"actions":[],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Use a custom server","comment2":""},{"disabled":true,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"P2P::UseOwnBroker"},"parameters":["\"localhost\"","9000","\"/\"","\"\"","no"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Use default server","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"P2P::UseDefaultBroker"},"parameters":[],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["ErrorText","=","\"\""],"subInstructions":[]}],"events":[]}]}],"parameters":[]},{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"disabled":false,"folded":false,"name":"Get P2P Adress and yourself into the playerlist","source":"","type":"BuiltinCommonInstructions::Group","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"add broker to the list","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"P2P::IsReady"},"parameters":[],"subInstructions":[]},{"type":{"inverted":false,"value":"BuiltinCommonInstructions::Once"},"parameters":[],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"ModVarGlobalTxt"},"parameters":["playerlist.0.id","=","P2P::GetID()"],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarGlobalTxt"},"parameters":["playerlist.0.username","=","GlobalVariableString(username)"],"subInstructions":[]}],"events":[]}],"parameters":[]},{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"disabled":false,"folded":false,"name":"Check for connection response","source":"","type":"BuiltinCommonInstructions::Group","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Wait for connection confirmation [send from Waiter]","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"P2P::OnEvent"},"parameters":["\"ok\"","yes"],"subInstructions":[]}],"actions":[],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"When confirmed, we write the player in the list and also write the username as an objectvariable of IdEntryText, in case of a disconnection (to rewrite the list)","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["idEntryText","=","P2P::GetEventSender(\"ok\")"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"ModVarObjetTxt"},"parameters":["idEntryText","username","=","P2P::GetEventData(\"ok\")"],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarGlobalTxt"},"parameters":["playerlist[idEntryText.Variable(id)].username","=","idEntryText.VariableString(username)"],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarGlobalTxt"},"parameters":["playerlist[idEntryText.Variable(id)].id","=","idEntryText.String()"],"subInstructions":[]}],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"make optical changes to the ConnectText","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarObjet"},"parameters":["ConnectText","id","=","idEntryText.Variable(id)"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["ConnectText","=","\"Connected\""],"subInstructions":[]},{"type":{"inverted":false,"value":"TextObject::ChangeColor"},"parameters":["ConnectText","\"50;200;50\""],"subInstructions":[]},{"type":{"inverted":false,"value":"MettreX"},"parameters":["ConnectText","-","4"],"subInstructions":[]},{"type":{"inverted":false,"value":"TextObject::Size"},"parameters":["ConnectText","=","18"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Use a boolean to prevent multible clicks on a player, who is connected already","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarObjet"},"parameters":["ConnectButton","id","=","idEntryText.Variable(id)"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"SetObjectVariableAsBoolean"},"parameters":["ConnectButton","Connected","True"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Delete paste & remove, once a player is confirmed","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarObjet"},"parameters":["PasteButton","id","=","idEntryText.Variable(id)"],"subInstructions":[]},{"type":{"inverted":false,"value":"VarObjet"},"parameters":["PasteText","id","=","idEntryText.Variable(id)"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"Delete"},"parameters":["PasteButton",""],"subInstructions":[]},{"type":{"inverted":false,"value":"Delete"},"parameters":["PasteText",""],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarObjet"},"parameters":["RemoveButton","id","=","idEntryText.Variable(id)"],"subInstructions":[]},{"type":{"inverted":false,"value":"VarObjet"},"parameters":["remove","id","=","idEntryText.Variable(id)"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"Delete"},"parameters":["RemoveButton",""],"subInstructions":[]},{"type":{"inverted":false,"value":"Delete"},"parameters":["remove",""],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"tell the player, he is added to the list","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"P2P::SendToOne"},"parameters":["P2P::GetEventSender(\"ok\")","\"in\"","\"\""],"subInstructions":[]}],"events":[]}]}]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"if something goes wrong and a peer disconnects","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"P2P::OnDisconnection"},"parameters":[],"subInstructions":[]}],"actions":[],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"delete the playerfields of the disconnected player","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["idEntryText","=","P2P::GetLastDisconnectedPeer()"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["activeID","=","idEntryText.Variable(id)"],"subInstructions":[]}],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarObjet"},"parameters":["Playerfields","id","=","Variable(activeID)"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"Delete"},"parameters":["Playerfields",""],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"MettreY"},"parameters":["add","-","80"],"subInstructions":[]},{"type":{"inverted":false,"value":"MettreY"},"parameters":["addButton","-","80"],"subInstructions":[]},{"type":{"inverted":false,"value":"MettreY"},"parameters":["Start","-","80"],"subInstructions":[]},{"type":{"inverted":false,"value":"MettreY"},"parameters":["StartButton","-","80"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"and update the id numbers and position of the other fields","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"AjoutObjConcern"},"parameters":["","Playerfields"],"subInstructions":[]},{"type":{"inverted":false,"value":"VarObjet"},"parameters":["Playerfields","id",">","Variable(activeID)"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"MettreY"},"parameters":["Playerfields","-","80"],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarObjet"},"parameters":["Playerfields","id","-","1"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["PlayerCount","-","1"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"let the player know whats going on","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["ErrorText","=","\"A Player disconnected and was removed\"+NewLine()+\"Try to add them again, or start without\""],"subInstructions":[]}],"events":[]}]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Rewriting the list (to have it sorted)","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"GlobalVariableClearChildren"},"parameters":["playerlist"],"subInstructions":[]}],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Rewriting the list using the objects","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"ModVarGlobalTxt"},"parameters":["playerlist.0.id","=","P2P::GetID()"],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarGlobalTxt"},"parameters":["playerlist.0.username","=","GlobalVariableString(username)"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::ForEach","object":"idEntryText","conditions":[],"actions":[{"type":{"inverted":false,"value":"ModVarGlobalTxt"},"parameters":["playerlist[idEntryText.Variable(id)].id","=","idEntryText.String()"],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarGlobalTxt"},"parameters":["playerlist[idEntryText.Variable(id)].username","=","idEntryText.VariableString(username)"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"in case we where in the Start Game loop already, stop it and tell the other to stop aswell","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarScene"},"parameters":["Step",">","0"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"P2P::SendToAll"},"parameters":["\"restart\"","\"\""],"subInstructions":[]},{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["Start","=","\"Start Game\""],"subInstructions":[]},{"type":{"inverted":false,"value":"TextObject::ChangeColor"},"parameters":["Start","\"0;0;0\""],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["Step","=","0"],"subInstructions":[]}],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"AjoutObjConcern"},"parameters":["","checkbox"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"Delete"},"parameters":["checkbox",""],"subInstructions":[]}],"events":[]}]}]}]}],"parameters":[]},{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"disabled":false,"folded":false,"name":"Adress Typing","source":"","type":"BuiltinCommonInstructions::Group","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"TextEntryObject::Activated"},"parameters":["idEntry"],"subInstructions":[]}],"actions":[],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarObjet"},"parameters":["idEntry","id","=","Variable(activeID)"],"subInstructions":[]},{"type":{"inverted":false,"value":"VarObjet"},"parameters":["idEntryText","id","=","Variable(activeID)"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["idEntryText","=","idEntry.String()"],"subInstructions":[]}],"events":[]}]}],"parameters":[]},{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"disabled":false,"folded":false,"name":"Touch/Mouse actions","source":"","type":"BuiltinCommonInstructions::Group","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"SourisBouton"},"parameters":["","Left"],"subInstructions":[]},{"type":{"inverted":false,"value":"BuiltinCommonInstructions::Once"},"parameters":[],"subInstructions":[]}],"actions":[],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"select which player you want to enter the adress of (for manual typing)","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"SourisSurObjet"},"parameters":["idEntrySprite","","",""],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["activeID","=","idEntrySprite.Variable(id)"],"subInstructions":[]}],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"AjoutObjConcern"},"parameters":["","idEntrySprite"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"ChangeAnimation"},"parameters":["idEntrySprite","=","0"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"ChangeAnimation"},"parameters":["idEntrySprite","=","1"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"AjoutObjConcern"},"parameters":["","idEntry"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"TextEntryObject::Activate"},"parameters":["idEntry","no"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarObjet"},"parameters":["idEntry","id","=","Variable(activeID)"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"TextEntryObject::Activate"},"parameters":["idEntry","yes"],"subInstructions":[]}],"events":[]}]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Paste the Adress, copied over external chats (massenger, discord, ect..)","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"SourisSurObjet"},"parameters":["PasteButton","","",""],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"TextEntryObject::Activate"},"parameters":["idEntry","yes"],"subInstructions":[]}],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarObjet"},"parameters":["idEntry","id","=","PasteButton.Variable(id)"],"subInstructions":[]},{"type":{"inverted":false,"value":"VarObjet"},"parameters":["idEntryText","id","=","PasteButton.Variable(id)"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"TextEntryObject::String"},"parameters":["idEntry","+","Clipboard::ReadText()"],"subInstructions":[]},{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["idEntryText","=","idEntry.String()"],"subInstructions":[]}],"events":[]}]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Add another player field to the game by creating the relevant objects","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"SourisSurObjet"},"parameters":["addButton","","",""],"subInstructions":[]}],"actions":[],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["PlayerCount","+","1"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"MettreY"},"parameters":["add","+","80"],"subInstructions":[]},{"type":{"inverted":false,"value":"MettreY"},"parameters":["addButton","+","80"],"subInstructions":[]},{"type":{"inverted":false,"value":"MettreY"},"parameters":["Start","+","80"],"subInstructions":[]},{"type":{"inverted":false,"value":"MettreY"},"parameters":["StartButton","+","80"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"Create"},"parameters":["","idEntrySprite","108","120+80*Variable(PlayerCount)",""],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarObjet"},"parameters":["idEntrySprite","id","=","Variable(PlayerCount)"],"subInstructions":[]},{"type":{"inverted":false,"value":"ChangePlan"},"parameters":["idEntrySprite","=","0"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"Create"},"parameters":["","idEntryText","124","138+80*Variable(PlayerCount)",""],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarObjet"},"parameters":["idEntryText","id","=","Variable(PlayerCount)"],"subInstructions":[]},{"type":{"inverted":false,"value":"ChangePlan"},"parameters":["idEntryText","=","1"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"Create"},"parameters":["","idEntry","530","133+80*Variable(PlayerCount)",""],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarObjet"},"parameters":["idEntry","id","=","Variable(PlayerCount)"],"subInstructions":[]},{"type":{"inverted":false,"value":"ChangePlan"},"parameters":["idEntry","=","1"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"Create"},"parameters":["","PasteButton","10","120+80*Variable(PlayerCount)",""],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarObjet"},"parameters":["PasteButton","id","=","Variable(PlayerCount)"],"subInstructions":[]},{"type":{"inverted":false,"value":"ChangePlan"},"parameters":["PasteButton","=","0"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"Create"},"parameters":["","PasteText","26","140+80*Variable(PlayerCount)",""],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarObjet"},"parameters":["PasteText","id","=","Variable(PlayerCount)"],"subInstructions":[]},{"type":{"inverted":false,"value":"ChangePlan"},"parameters":["PasteText","=","1"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"Create"},"parameters":["","ConnectButton","598","120+80*Variable(PlayerCount)",""],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarObjet"},"parameters":["ConnectButton","id","=","Variable(PlayerCount)"],"subInstructions":[]},{"type":{"inverted":false,"value":"ChangePlan"},"parameters":["ConnectButton","=","0"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"Create"},"parameters":["","ConnectText","609","140+80*Variable(PlayerCount)",""],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarObjet"},"parameters":["ConnectText","id","=","Variable(PlayerCount)"],"subInstructions":[]},{"type":{"inverted":false,"value":"ChangePlan"},"parameters":["ConnectText","=","1"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"Create"},"parameters":["","RemoveButton","708","120+80*Variable(PlayerCount)",""],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarObjet"},"parameters":["RemoveButton","id","=","Variable(PlayerCount)"],"subInstructions":[]},{"type":{"inverted":false,"value":"ChangePlan"},"parameters":["RemoveButton","=","0"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"Create"},"parameters":["","remove","712","140+80*Variable(PlayerCount)",""],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarObjet"},"parameters":["remove","id","=","Variable(PlayerCount)"],"subInstructions":[]},{"type":{"inverted":false,"value":"ChangePlan"},"parameters":["remove","=","1"],"subInstructions":[]}],"events":[]}]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Remove a player field from the game","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"SourisSurObjet"},"parameters":["RemoveButton","","",""],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["activeID","=","RemoveButton.Variable(id)"],"subInstructions":[]}],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarObjet"},"parameters":["Playerfields","id","=","RemoveButton.Variable(id)"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"Delete"},"parameters":["Playerfields",""],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"MettreY"},"parameters":["add","-","80"],"subInstructions":[]},{"type":{"inverted":false,"value":"MettreY"},"parameters":["addButton","-","80"],"subInstructions":[]},{"type":{"inverted":false,"value":"MettreY"},"parameters":["Start","-","80"],"subInstructions":[]},{"type":{"inverted":false,"value":"MettreY"},"parameters":["StartButton","-","80"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"AjoutObjConcern"},"parameters":["","Playerfields"],"subInstructions":[]},{"type":{"inverted":false,"value":"VarObjet"},"parameters":["Playerfields","id",">","Variable(activeID)"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"MettreY"},"parameters":["Playerfields","-","80"],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarObjet"},"parameters":["Playerfields","id","-","1"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["PlayerCount","-","1"],"subInstructions":[]}],"events":[]}]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Connect to the player field adress","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"SourisSurObjet"},"parameters":["ConnectButton","","",""],"subInstructions":[]}],"actions":[],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"ObjectVariableAsBoolean"},"parameters":["ConnectButton","Connected",""],"subInstructions":[]}],"actions":[],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarObjet"},"parameters":["idEntryText","id","=","ConnectButton.Variable(id)"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"P2P::Connect"},"parameters":["idEntryText.String()"],"subInstructions":[]}],"events":[]}]}]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"once, all players to participate are entered and connected, start the connection progress steps","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"SourisSurObjet"},"parameters":["StartButton","","",""],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["PlayerCount","=","1"],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["Step","=","1"],"subInstructions":[]}],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["Start","=","\"Starting\""],"subInstructions":[]},{"type":{"inverted":false,"value":"TextObject::ChangeColor"},"parameters":["Start","\"50;200;50\""],"subInstructions":[]}],"events":[]}]}]}],"parameters":[]},{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"disabled":false,"folded":false,"name":"Start Game Loop","source":"","type":"BuiltinCommonInstructions::Group","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":194,"g":227,"r":80,"textB":0,"textG":0,"textR":0},"comment":"This Connection Procedure is divided into steps since the dataflow is asynchronious. It also helps to debug\nIt avoids the same P2P events triggered at the same time, which is why we send the \"ready\" to each individual player, instead of all of them at once\nWe Use the playerlist structure to send the p2p-events","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Connection progress Step1: send the connected player the playerlist as JSON","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarScene"},"parameters":["Step","=","1"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"P2P::SendToOne"},"parameters":["GlobalVariableString(playerlist[VariableString(PlayerCount)].id)","\"ready\"","GlobalVarToJSON(playerlist)"],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["Step","=","2"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Connection progress Step2: Wait for response of the player to confirm that he is connected to the others  [send from Waiter]","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarScene"},"parameters":["Step","=","2"],"subInstructions":[]}],"actions":[],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"P2P::OnEvent"},"parameters":["\"ready\"","yes"],"subInstructions":[]},{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["idEntryText","=","GlobalVariableString(playerlist[VariableString(PlayerCount)].id)"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"Create"},"parameters":["","checkbox","45","130+80*idEntryText.Variable(id)",""],"subInstructions":[]}],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"check if that player was the last one in the list, and if not continue with the next player, by repeating step 1. We check the Playercount +1 since the broker is 0","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"Egal"},"parameters":["Variable(PlayerCount)+1","<","GlobalVariableChildCount(playerlist)"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["PlayerCount","+","1"],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["Step","=","1"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"if the scene variable step was not changed to 1, that means we have connected all the players and can give all players the \"go\" to change scene. and change the scene for the broker too.","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarScene"},"parameters":["Step","=","2"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"P2P::SendToAll"},"parameters":["\"go\"","\"\""],"subInstructions":[]},{"type":{"inverted":false,"value":"Scene"},"parameters":["","\"Menu\"","yes"],"subInstructions":[]}],"events":[]}]}]}],"parameters":[]},{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"disabled":false,"folded":false,"name":"Error Handling","source":"","type":"BuiltinCommonInstructions::Group","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"P2P::OnError"},"parameters":[],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["ErrorText","=","P2P::GetLastError()"],"subInstructions":[]}],"events":[]}],"parameters":[]}],"layers":[{"ambientLightColorB":200,"ambientLightColorG":200,"ambientLightColorR":200,"followBaseLayerCamera":false,"isLightingLayer":false,"name":"","visibility":true,"cameras":[{"defaultSize":true,"defaultViewport":true,"height":0.0,"viewportBottom":1.0,"viewportLeft":0.0,"viewportRight":1.0,"viewportTop":0.0,"width":0.0}],"effects":[]}],"behaviorsSharedData":[]},{"b":209,"disableInputWhenNotFocused":true,"mangledName":"Menu","name":"Menu","oglFOV":90.0,"oglZFar":500.0,"oglZNear":1.0,"r":209,"standardSortMethod":true,"stopSoundsOnStartup":true,"title":"","v":209,"uiSettings":{"grid":false,"gridType":"rectangular","gridWidth":32.0,"gridHeight":32.0,"gridOffsetX":0.0,"gridOffsetY":0.0,"gridColor":10401023.0,"gridAlpha":0.8,"snap":true,"zoomFactor":0.5100000000000001,"windowMask":false},"objectsGroups":[],"variables":[],"instances":[{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"Connected","persistentUuid":"7c3e3132-7ef7-4541-ae2f-b76af5306952","width":0.0,"x":232.0,"y":22.0,"zOrder":1,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"ChooseGame","persistentUuid":"cf37a38a-aa5f-4261-a528-2223ecf46801","width":0.0,"x":247.0,"y":76.0,"zOrder":2,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"icon","persistentUuid":"140101ce-3acf-462b-929f-3bdcbdca3b6c","width":0.0,"x":156.0,"y":206.0,"zOrder":3,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"icon","persistentUuid":"ba3e7dd5-bfd2-4d76-a9e5-5f6cbdc98df3","width":0.0,"x":543.0,"y":206.0,"zOrder":4,"numberProperties":[{"name":"animation","value":1.0}],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"chat","persistentUuid":"6f92c32b-6d49-48e8-bf63-83ea70b880b2","width":0.0,"x":182.0,"y":290.0,"zOrder":5,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"syncbtn","persistentUuid":"4e3808c1-b215-4188-a896-b92a1d938cc5","width":0.0,"x":499.0,"y":290.0,"zOrder":6,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"height":163.0,"layer":"","locked":false,"name":"Hitbox","persistentUuid":"27c45ab5-3139-4670-962e-7a91c93af185","width":284.0,"x":452.0,"y":187.0,"zOrder":0,"numberProperties":[],"stringProperties":[],"initialVariables":[{"name":"game","type":"string","value":"1"}]},{"angle":0.0,"customSize":true,"height":163.0,"layer":"","locked":false,"name":"Hitbox","persistentUuid":"4a31ec56-1860-42ea-998d-ca22e818495b","width":284.0,"x":65.0,"y":186.0,"zOrder":0,"numberProperties":[],"stringProperties":[],"initialVariables":[]}],"objects":[{"bold":false,"italic":false,"name":"Connected","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"Successfully Connected!","font":"","characterSize":30.0,"color":{"b":0,"g":0,"r":0}},{"bold":false,"italic":true,"name":"ChooseGame","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"Choose your game:","font":"","characterSize":35.0,"color":{"b":0,"g":0,"r":0}},{"name":"icon","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[],"effects":[],"behaviors":[],"animations":[{"name":"","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"Assets\\chat_icon.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]},{"name":"","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"Assets\\button_icon.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]},{"bold":false,"italic":false,"name":"chat","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"Chat","font":"","characterSize":20.0,"color":{"b":0,"g":0,"r":0}},{"bold":false,"italic":false,"name":"syncbtn","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"Synchronised Buttons","font":"","characterSize":20.0,"color":{"b":0,"g":0,"r":0}},{"name":"Hitbox","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[],"effects":[],"behaviors":[],"animations":[{"name":"void","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"Assets\\box.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]}],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Handle button presses","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"KeyPressed"},"parameters":["","Left"],"subInstructions":[]},{"type":{"inverted":false,"value":"BuiltinCommonInstructions::Or"},"parameters":[],"subInstructions":[{"type":{"inverted":false,"value":"BuiltinCommonInstructions::And"},"parameters":[],"subInstructions":[{"type":{"inverted":false,"value":"SourisBouton"},"parameters":["","Left"],"subInstructions":[]},{"type":{"inverted":false,"value":"SourisSurObjet"},"parameters":["Hitbox","","",""],"subInstructions":[]},{"type":{"inverted":false,"value":"VarObjet"},"parameters":["Hitbox","game","=","0"],"subInstructions":[]}]}]},{"type":{"inverted":false,"value":"BuiltinCommonInstructions::Once"},"parameters":[],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"P2P::SendToAll"},"parameters":["\"Chat\"","\"\""],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"KeyPressed"},"parameters":["","Right"],"subInstructions":[]},{"type":{"inverted":false,"value":"BuiltinCommonInstructions::Or"},"parameters":[],"subInstructions":[{"type":{"inverted":false,"value":"BuiltinCommonInstructions::And"},"parameters":[],"subInstructions":[{"type":{"inverted":false,"value":"SourisBouton"},"parameters":["","Left"],"subInstructions":[]},{"type":{"inverted":false,"value":"SourisSurObjet"},"parameters":["Hitbox","","",""],"subInstructions":[]},{"type":{"inverted":false,"value":"VarObjet"},"parameters":["Hitbox","game","=","1"],"subInstructions":[]}]}]},{"type":{"inverted":false,"value":"BuiltinCommonInstructions::Once"},"parameters":[],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"P2P::SendToAll"},"parameters":["\"SyncBtns\"","\"\""],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Make sure both clients are on the same game","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"P2P::OnEvent"},"parameters":["\"Chat\"","yes"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"P2P::SendToAll"},"parameters":["\"Chat\"","\"\""],"subInstructions":[]},{"type":{"inverted":false,"value":"Scene"},"parameters":["","\"Chat\"","yes"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"P2P::OnEvent"},"parameters":["\"SyncBtns\"","yes"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"P2P::SendToAll"},"parameters":["\"SyncBtns\"","\"\""],"subInstructions":[]},{"type":{"inverted":false,"value":"Scene"},"parameters":["","\"SynchronisedCheckBox\"","yes"],"subInstructions":[]}],"events":[]}],"layers":[{"ambientLightColorB":200,"ambientLightColorG":200,"ambientLightColorR":200,"followBaseLayerCamera":false,"isLightingLayer":false,"name":"","visibility":true,"cameras":[{"defaultSize":true,"defaultViewport":true,"height":0.0,"viewportBottom":1.0,"viewportLeft":0.0,"viewportRight":1.0,"viewportTop":0.0,"width":0.0}],"effects":[]}],"behaviorsSharedData":[]},{"b":209,"disableInputWhenNotFocused":true,"mangledName":"SynchronisedCheckBox","name":"SynchronisedCheckBox","oglFOV":90.0,"oglZFar":500.0,"oglZNear":1.0,"r":209,"standardSortMethod":true,"stopSoundsOnStartup":true,"title":"","v":209,"uiSettings":{"grid":false,"gridType":"rectangular","gridWidth":32.0,"gridHeight":32.0,"gridOffsetX":0.0,"gridOffsetY":0.0,"gridColor":10401023.0,"gridAlpha":0.8,"snap":true,"zoomFactor":0.37439999999999987,"windowMask":false},"objectsGroups":[],"variables":[],"instances":[{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"checkbox","persistentUuid":"eb1f3515-2a0d-4d2d-bf79-347d1b4e4342","width":0.0,"x":48.0,"y":88.0,"zOrder":1,"numberProperties":[],"stringProperties":[],"initialVariables":[{"name":"id","type":"string","value":"1"}]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"checkbox","persistentUuid":"9ee119e3-92a9-45de-b207-100d11fe6ef1","width":0.0,"x":349.0,"y":90.0,"zOrder":2,"numberProperties":[],"stringProperties":[],"initialVariables":[{"name":"id","type":"string","value":"2"}]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"checkbox","persistentUuid":"6e1231f1-f96d-4a0b-976d-f50bbfe493b0","width":0.0,"x":701.0,"y":88.0,"zOrder":3,"numberProperties":[],"stringProperties":[],"initialVariables":[{"name":"id","type":"string","value":"3"}]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"checkbox","persistentUuid":"fa5c6eea-d11c-4a6f-96e7-64167e0ebb2d","width":0.0,"x":701.0,"y":439.0,"zOrder":4,"numberProperties":[],"stringProperties":[],"initialVariables":[{"name":"id","type":"string","value":"8"}]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"checkbox","persistentUuid":"8966eeb2-c578-4299-8ea8-fb0bf2b6964a","width":0.0,"x":353.0,"y":434.0,"zOrder":5,"numberProperties":[],"stringProperties":[],"initialVariables":[{"name":"id","type":"string","value":"7"}]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"checkbox","persistentUuid":"eaaa038c-3016-4374-9fad-084f1539c031","width":0.0,"x":50.0,"y":441.0,"zOrder":6,"numberProperties":[],"stringProperties":[],"initialVariables":[{"name":"id","type":"string","value":"6"}]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"checkbox","persistentUuid":"9d9ff8e9-7e80-4e02-9d89-ed570af12ff7","width":0.0,"x":193.0,"y":262.0,"zOrder":7,"numberProperties":[],"stringProperties":[],"initialVariables":[{"name":"id","type":"string","value":"4"}]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"checkbox","persistentUuid":"7043a1f3-e000-49c2-9107-6f552097798f","width":0.0,"x":559.0,"y":274.0,"zOrder":8,"numberProperties":[],"stringProperties":[],"initialVariables":[{"name":"id","type":"string","value":"5"}]}],"objects":[{"name":"checkbox","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[{"name":"id","type":"string","value":"0"}],"effects":[],"behaviors":[],"animations":[{"name":"checked","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"Assets\\Checkmark.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]},{"name":"unchecked","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"Assets\\UncheckedCheckmark.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]}],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Handle UI","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"SourisBouton"},"parameters":["","Left"],"subInstructions":[]},{"type":{"inverted":false,"value":"BuiltinCommonInstructions::Once"},"parameters":[],"subInstructions":[]},{"type":{"inverted":false,"value":"SourisSurObjet"},"parameters":["checkbox","","",""],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["temp","=","0"],"subInstructions":[]}],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"AnimationName"},"parameters":["checkbox","\"checked\""],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"P2P::SendToAll"},"parameters":["\"uncheck\"","checkbox.VariableString(id)"],"subInstructions":[]},{"type":{"inverted":false,"value":"SetAnimationName"},"parameters":["checkbox","\"unchecked\""],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["temp","=","1"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"VarScene"},"parameters":["temp","=","0"],"subInstructions":[]},{"type":{"inverted":false,"value":"AnimationName"},"parameters":["checkbox","\"unchecked\""],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"P2P::SendToAll"},"parameters":["\"check\"","checkbox.VariableString(id)"],"subInstructions":[]},{"type":{"inverted":false,"value":"SetAnimationName"},"parameters":["checkbox","\"checked\""],"subInstructions":[]}],"events":[]}]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"KeyPressed"},"parameters":["","Return"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"PushScene"},"parameters":["","\"Chat\""],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Handle synchronisation","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"P2P::OnEvent"},"parameters":["\"check\"","no"],"subInstructions":[]},{"type":{"inverted":false,"value":"VarObjet"},"parameters":["checkbox","id","=","ToNumber(P2P::GetEventData(\"check\"))"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"SetAnimationName"},"parameters":["checkbox","\"checked\""],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"P2P::OnEvent"},"parameters":["\"uncheck\"","no"],"subInstructions":[]},{"type":{"inverted":false,"value":"VarObjet"},"parameters":["checkbox","id","=","ToNumber(P2P::GetEventData(\"uncheck\"))"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"SetAnimationName"},"parameters":["checkbox","\"unchecked\""],"subInstructions":[]}],"events":[]}],"layers":[{"ambientLightColorB":200,"ambientLightColorG":200,"ambientLightColorR":200,"followBaseLayerCamera":false,"isLightingLayer":false,"name":"","visibility":true,"cameras":[{"defaultSize":true,"defaultViewport":true,"height":0.0,"viewportBottom":1.0,"viewportLeft":0.0,"viewportRight":1.0,"viewportTop":0.0,"width":0.0}],"effects":[]}],"behaviorsSharedData":[]},{"b":209,"disableInputWhenNotFocused":true,"mangledName":"Chat","name":"Chat","oglFOV":90.0,"oglZFar":500.0,"oglZNear":1.0,"r":209,"standardSortMethod":true,"stopSoundsOnStartup":true,"title":"","v":209,"uiSettings":{"grid":false,"gridType":"rectangular","gridWidth":32.0,"gridHeight":32.0,"gridOffsetX":0.0,"gridOffsetY":0.0,"gridColor":10401023.0,"gridAlpha":0.8,"snap":true,"zoomFactor":0.5767999999999998,"windowMask":false},"objectsGroups":[],"variables":[{"name":"textBox","type":"string","value":"~~Begin of conversation~~"}],"instances":[{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"Chat","persistentUuid":"5ad5388f-b427-4ec8-9d6c-9f1a874b4359","width":0.0,"x":105.0,"y":0.0,"zOrder":1,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"height":438.0,"layer":"","locked":false,"name":"ChatBox","persistentUuid":"5f2f3009-7186-4186-b74f-e9c08fefdd04","width":607.0,"x":28.0,"y":61.0,"zOrder":2,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"height":507.0,"layer":"","locked":false,"name":"ChatBoxSprite","persistentUuid":"51196764-54f8-4094-8155-b9e0e64009f9","width":122.0,"x":669.0,"y":38.0,"zOrder":0,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"height":49.0,"layer":"","locked":false,"name":"EntrySprite","persistentUuid":"85ba2dce-fc45-45a4-a9ed-dfb87c5ffdd7","width":634.0,"x":20.0,"y":547.0,"zOrder":3,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"height":45.0,"layer":"","locked":false,"name":"SendButton","persistentUuid":"20451529-023b-41a4-8340-ae553c4ccb6e","width":49.0,"x":692.0,"y":549.0,"zOrder":4,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"EntryText","persistentUuid":"3c72c24b-6abb-48ef-bfbf-340bc3b1a661","width":0.0,"x":28.0,"y":558.0,"zOrder":5,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"Entry","persistentUuid":"090902e6-747a-4cfd-8dc5-2bdfb05be5e8","width":0.0,"x":601.0,"y":553.0,"zOrder":6,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"height":507.0,"layer":"","locked":false,"name":"ChatBoxSprite","persistentUuid":"3d30195d-9d32-416f-a1d8-260ba735bc41","width":650.0,"x":10.0,"y":33.0,"zOrder":0,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"Game","persistentUuid":"e9e6b7d4-073e-4351-a737-29ff22e37321","width":0.0,"x":537.0,"y":3.0,"zOrder":7,"numberProperties":[],"stringProperties":[],"initialVariables":[]}],"objects":[{"bold":false,"italic":true,"name":"Game","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"Game:","font":"","characterSize":25.0,"color":{"b":254,"g":19,"r":144}},{"bold":false,"italic":true,"name":"Chat","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"Chat:","font":"","characterSize":25.0,"color":{"b":254,"g":19,"r":144}},{"bold":false,"italic":false,"name":"ChatBox","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"~~Begin of conversation~~","font":"","characterSize":15.0,"color":{"b":0,"g":0,"r":0}},{"name":"ChatBoxSprite","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[],"effects":[],"behaviors":[],"animations":[{"name":"","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"Assets\\box.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]},{"name":"EntrySprite","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[],"effects":[],"behaviors":[],"animations":[{"name":"","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"Assets\\textEntry.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]},{"name":"SendButton","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[],"effects":[],"behaviors":[],"animations":[{"name":"","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"Assets\\Checkmark.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]},{"bold":false,"italic":false,"name":"EntryText","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"<Entry Text>","font":"","characterSize":16.0,"color":{"b":0,"g":0,"r":0}},{"name":"Entry","tags":"","type":"TextEntryObject::TextEntry","variables":[],"effects":[],"behaviors":[]},{"bold":false,"italic":false,"name":"user","smoothed":true,"tags":"","type":"TextObject::Text","underlined":false,"variables":[],"effects":[],"behaviors":[],"string":"Text","font":"","characterSize":20.0,"color":{"b":0,"g":0,"r":0}}],"events":[{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"disabled":false,"folded":false,"name":"Initiate","source":"","type":"BuiltinCommonInstructions::Group","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"DepartScene"},"parameters":[""],"subInstructions":[]}],"actions":[],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["PlayerCount","=","0"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"loop over each child in the playerlist and create a user text and set the objectvariable of it to the id of the player (so we know who wrote massages)","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Repeat","repeatExpression":"GlobalVariableChildCount(playerlist)","conditions":[],"actions":[],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"Create"},"parameters":["","user","674","55+Variable(PlayerCount)*30",""],"subInstructions":[]},{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["user","=","GlobalVariableString(playerlist[VariableString(PlayerCount)].username)"],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarObjetTxt"},"parameters":["user","id","=","GlobalVariableString(playerlist[VariableString(PlayerCount)].id)"],"subInstructions":[]},{"type":{"inverted":false,"value":"ChangePlan"},"parameters":["user","=","1"],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["PlayerCount","+","1"],"subInstructions":[]}],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"make sure the username text fits by reducing its size, till it will fit","comment2":""},{"disabled":false,"folded":false,"infiniteLoopWarning":true,"type":"BuiltinCommonInstructions::While","whileConditions":[{"type":{"inverted":false,"value":"Egal"},"parameters":["user.Width()",">","110"],"subInstructions":[]}],"conditions":[],"actions":[{"type":{"inverted":false,"value":"TextObject::Size"},"parameters":["user","-","1"],"subInstructions":[]}],"events":[]}]}]}]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"SourisSurObjet"},"parameters":["Game","","",""],"subInstructions":[]},{"type":{"inverted":false,"value":"MouseButtonReleased"},"parameters":["","Left"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"PopScene"},"parameters":[""],"subInstructions":[]}],"events":[]}],"parameters":[]},{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"disabled":false,"folded":false,"name":"Sending messages","source":"","type":"BuiltinCommonInstructions::Group","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Handle text entry","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"TextEntryObject::String"},"parameters":["Entry","=","Sanitizer::trim(Entry.String(), 50)"],"subInstructions":[]},{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["EntryText","=","Entry.String()"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Handle sending","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"Egal"},"parameters":["StrLength(Sanitizer::sanitize(Entry.String()))","!=","0"],"subInstructions":[]},{"type":{"inverted":false,"value":"BuiltinCommonInstructions::Or"},"parameters":[],"subInstructions":[{"type":{"inverted":false,"value":"KeyPressed"},"parameters":["","Return"],"subInstructions":[]},{"type":{"inverted":false,"value":"BuiltinCommonInstructions::And"},"parameters":[],"subInstructions":[{"type":{"inverted":false,"value":"SourisBouton"},"parameters":["","Left"],"subInstructions":[]},{"type":{"inverted":false,"value":"SourisSurObjet"},"parameters":["SendButton","","",""],"subInstructions":[]}]}]},{"type":{"inverted":false,"value":"BuiltinCommonInstructions::Once"},"parameters":[],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["ChatBox","+","NewLine() + \"You: \" + Sanitizer::removeNewLines(Entry.String())"],"subInstructions":[]},{"type":{"inverted":false,"value":"P2P::SendToAll"},"parameters":["\"message\"","Entry.String()"],"subInstructions":[]},{"type":{"inverted":false,"value":"TextEntryObject::String"},"parameters":["Entry","=","\"\""],"subInstructions":[]}],"events":[]}],"parameters":[]},{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"disabled":false,"folded":false,"name":"Receiving messages","source":"","type":"BuiltinCommonInstructions::Group","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"we compare the id of the sender with the id of the usertext and set the chatbox to the massage text and the username","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"P2P::OnEvent"},"parameters":["\"message\"",""],"subInstructions":[]},{"type":{"inverted":false,"value":"VarObjetTxt"},"parameters":["user","id","=","P2P::GetEventSender(\"message\")"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["ChatBox","+","NewLine() + user.String() +\": \" + Sanitizer::removeNewLines(P2P::GetEventData(\"message\"))"],"subInstructions":[]}],"events":[]}],"parameters":[]},{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"disabled":false,"folded":false,"name":"UI","source":"","type":"BuiltinCommonInstructions::Group","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Make sure newest message is always visible by removing older messages","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"Egal"},"parameters":["Sanitizer::countNewLines(ChatBox.String())",">=","28"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"TextObject::String"},"parameters":["ChatBox","=","Sanitizer::removeFirstLine(ChatBox.String())"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Remove disconnected users","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"P2P::OnDisconnection"},"parameters":[],"subInstructions":[]},{"type":{"inverted":false,"value":"VarObjetTxt"},"parameters":["user","id","=","P2P::GetLastDisconnectedPeer()"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["lastDisconnectedY","=","user.Y()"],"subInstructions":[]},{"type":{"inverted":false,"value":"Delete"},"parameters":["user",""],"subInstructions":[]}],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"AjoutObjConcern"},"parameters":["","user"],"subInstructions":[]},{"type":{"inverted":false,"value":"PosY"},"parameters":["user",">","Variable(lastDisconnectedY)"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"MettreY"},"parameters":["user","-","30"],"subInstructions":[]}],"events":[]}]}],"parameters":[]}],"layers":[{"ambientLightColorB":200,"ambientLightColorG":200,"ambientLightColorR":200,"followBaseLayerCamera":false,"isLightingLayer":false,"name":"","visibility":true,"cameras":[{"defaultSize":true,"defaultViewport":true,"height":0.0,"viewportBottom":1.0,"viewportLeft":0.0,"viewportRight":1.0,"viewportTop":0.0,"width":0.0}],"effects":[]}],"behaviorsSharedData":[]}],"externalEvents":[{"associatedLayout":"Broker","lastChangeTimeStamp":0,"name":"Disconnection","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"BuiltinCommonInstructions::Or"},"parameters":[],"subInstructions":[{"type":{"inverted":false,"value":"P2P::OnError"},"parameters":[],"subInstructions":[]},{"type":{"inverted":false,"value":"P2P::OnDisconnection"},"parameters":[],"subInstructions":[]}]}],"actions":[{"type":{"inverted":false,"value":"Scene"},"parameters":["","\"Disconnected\"","yes"],"subInstructions":[]}],"events":[]}]}],"eventsFunctionsExtensions":[{"author":"@Bouh, @arthuro555","description":"This extension adds tools to access the clipboard. It only works on Windows, macOS, Linux and web browsers.","extensionNamespace":"","fullName":"Clipboard","helpPath":"","iconUrl":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLWNsaXBib2FyZC10ZXh0LW11bHRpcGxlLW91dGxpbmUiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNNCA3VjIxSDE4VjIzSDRDMi45IDIzIDIgMjIuMSAyIDIxVjdINE0yMCAzQzIxLjEgMyAyMiAzLjkgMjIgNVYxN0MyMiAxOC4xIDIxLjEgMTkgMjAgMTlIOEM2LjkgMTkgNiAxOC4xIDYgMTdWNUM2IDMuOSA2LjkgMyA4IDNIMTEuMThDMTEuNiAxLjg0IDEyLjcgMSAxNCAxQzE1LjMgMSAxNi40IDEuODQgMTYuODIgM0gyME0xNCAzQzEzLjQ1IDMgMTMgMy40NSAxMyA0QzEzIDQuNTUgMTMuNDUgNSAxNCA1QzE0LjU1IDUgMTUgNC41NSAxNSA0QzE1IDMuNDUgMTQuNTUgMyAxNCAzTTEwIDdWNUg4VjE3SDIwVjVIMThWN00xNSAxNUgxMFYxM0gxNU0xOCAxMUgxMFY5SDE4VjExWiIgLz48L3N2Zz4=","name":"Clipboard","previewIconUrl":"https://resources.gdevelop-app.com/assets/Icons/clipboard-text-multiple-outline.svg","shortDescription":"Expression returning the content of the clipboard.","version":"0.0.2","tags":["clipboard","pasteboard","paste","write"],"authorIds":[],"dependencies":[],"eventsFunctions":[{"description":"Read the text from the clipboard asynchronously. As this is \"asynchronous\", this means that the variable won't be immediately filled with the text from the clipboard. Instead, it will be filled a few milliseconds later.\n\nNote also that on some platforms (like on web browsers), the user will be asked for permissions to read from the clipboard.\n\nThis only works on Windows, macOS, Linux and web browsers.","fullName":"Get text from the clipboard (Windows, macOS, Linux, web browser)","functionType":"Action","group":"","name":"ReadTextCrossPlaform","private":false,"sentence":"Read clipboard and store text in _PARAM1_","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::JsCode","inlineCode":"const electron = runtimeScene.getGame().getRenderer().getElectron();\nconst callback =\n    runtimeScene\n        .getVariables()\n        .get(eventsFunctionContext.getArgument(\"callback\"));\n\nif (electron !== null && electron.clipboard)\n    callback.setString(electron.clipboard.readText());\nelse if (\n    typeof navigator !== \"undefined\" &&\n    navigator.clipboard &&\n    navigator.clipboard.readText\n) {\n    navigator.clipboard.readText()\n        .then(text => callback.setString(text))\n        .catch(err =>\n            console.error(\"Error occured while getting clipboard content: \", err.message)\n        );\n} else console.error(\"Unable to read from the clipboard: no method found for this platform.\")\n","parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"codeOnly":false,"defaultValue":"","description":"Callback variable where to store the result","longDescription":"","name":"callback","optional":false,"supplementaryInformation":"","type":"string"}],"objectGroups":[]},{"description":"Read the text from the clipboard (Windows, macOS, Linux only)","fullName":"Get text from the clipboard (Windows, macOS, Linux)","functionType":"StringExpression","group":"","name":"ReadText","private":false,"sentence":"","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"This is here for retrocompatibility. Try to use the asynchronous readTextCrossPlatform action instead.","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::JsCode","inlineCode":"const electron = runtimeScene.getGame().getRenderer().getElectron();\nif (electron && electron.clipboard) eventsFunctionContext.returnValue = electron.clipboard.readText();\n","parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[],"objectGroups":[]},{"description":"Write the text in the clipboard (Windows, macOS, Linux, web browser only)","fullName":"Write text to the clipboard (Windows, macOS, Linux, web browser)","functionType":"Action","group":"","name":"WriteText","private":false,"sentence":"Write _PARAM1_ to clipboard","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::JsCode","inlineCode":"const electron = runtimeScene.getGame().getRenderer().getElectron();\nconst text = eventsFunctionContext.getArgument(\"text\");\n\nif (electron !== null && electron.clipboard)\n  electron.clipboard.writeText(text);\nif (\n  typeof navigator !== \"undefined\" &&\n  navigator.clipboard &&\n  navigator.clipboard.writeText\n) navigator.clipboard\n  .writeText(text)\n  .catch(e => console.error(\"Error while writing clipboard: \", e));\nelse console.error(\"Unable to write to the clipboard: no method found for this platform.\"); \n","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"codeOnly":false,"defaultValue":"","description":"Text to write to clipboard","longDescription":"","name":"text","optional":false,"supplementaryInformation":"","type":"string"}],"objectGroups":[]}],"eventsBasedBehaviors":[]},{"author":"Arthur Pacaud (arthuro555)","description":"Have multiple expressions that remove unwanted characters from a string (non-alphanumerical characters, new Lines...)","extensionNamespace":"","fullName":"Sanitizer","helpPath":"","iconUrl":"","name":"Sanitizer","previewIconUrl":"","shortDescription":"Removes unwanted text from strings","version":"1.0.0","tags":["sanitization","string","string manipulation"],"authorIds":[],"dependencies":[],"eventsFunctions":[{"description":"Removes every non-alphanumerical characters of a string.","fullName":"Sanitize Text","functionType":"StringExpression","group":"","name":"sanitize","private":false,"sentence":"","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = eventsFunctionContext.getArgument(\"text\").replace(/\\W/g, '');","parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"codeOnly":false,"defaultValue":"","description":"The text to sanitize","longDescription":"","name":"text","optional":false,"supplementaryInformation":"","type":"string"}],"objectGroups":[]},{"description":"Cuts a string to be sure it doesn't exxceeds a maximum size","fullName":"Trim a string","functionType":"StringExpression","group":"","name":"trim","private":false,"sentence":"","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = eventsFunctionContext.getArgument(\"text\").substring(0, eventsFunctionContext.getArgument(\"size\"));","parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"codeOnly":false,"defaultValue":"","description":"The string to trim","longDescription":"","name":"text","optional":false,"supplementaryInformation":"","type":"string"},{"codeOnly":false,"defaultValue":"","description":"The size to limit the string to","longDescription":"","name":"size","optional":false,"supplementaryInformation":"","type":"expression"}],"objectGroups":[]},{"description":"Replaces every new line character with a space","fullName":"Remove new lines","functionType":"StringExpression","group":"","name":"removeNewLines","private":false,"sentence":"","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = eventsFunctionContext.getArgument(\"text\").replace(/\\r?\\n|\\r/g, ' ');","parameterObjects":"","useStrict":true,"eventsSheetExpanded":false}],"parameters":[{"codeOnly":false,"defaultValue":"","description":"The text to remove new lines from","longDescription":"","name":"text","optional":false,"supplementaryInformation":"","type":"string"}],"objectGroups":[]},{"description":"Count the nmber of lines in a string","fullName":"Count Lines","functionType":"Expression","group":"","name":"countNewLines","private":false,"sentence":"","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = eventsFunctionContext.getArgument(\"text\").split(/\\r\\n|\\r|\\n/).length;","parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"codeOnly":false,"defaultValue":"","description":"The text to count lines from","longDescription":"","name":"text","optional":false,"supplementaryInformation":"","type":"string"}],"objectGroups":[]},{"description":"","fullName":"","functionType":"StringExpression","group":"","name":"removeFirstLine","private":false,"sentence":"","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::JsCode","inlineCode":"eventsFunctionContext.returnValue = eventsFunctionContext.getArgument(\"text\").substring(eventsFunctionContext.getArgument(\"text\").indexOf(\"\\n\") + 1);","parameterObjects":"","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"codeOnly":false,"defaultValue":"","description":"String to remove the first line from","longDescription":"","name":"text","optional":false,"supplementaryInformation":"","type":"string"}],"objectGroups":[]}],"eventsBasedBehaviors":[]}],"externalLayouts":[],"externalSourceFiles":[]}